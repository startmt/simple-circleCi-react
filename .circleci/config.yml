# Use the latest 2.1 version of CircleCI pipeline processing engine, see https://circleci.com/docs/2.0/configuration-reference/
version: 2

# Orchestrate or schedule a set of jobs, see https://circleci.com/docs/2.0/workflows/

    # Run the welcome/run job in its own container
jobs:
  react:
    working_directory: ~/simple-circleCi-react
    docker:
      - image: circleci/node:8
    steps:
    - setup_remote_docker:
        docker_layer_caching: true
    - checkout
    - run:
        name: build react
        command: |
         docker login -u $DOCKER_USERNAME -p $DOCKER_PASSWORD && \
         docker build -t $DOCKER_USERNAME/test-react-app . && \
         docker push $DOCKER_USERNAME/test-react-app
workflows:
  version: 2
  deploy:
    jobs:
          - react:
              filters:
                branches:
                  only:
                    - master
